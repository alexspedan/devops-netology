## Задание 1: подготовить тестовый конфиг для запуска приложения
Для начала следует подготовить запуск приложения в stage окружении с простыми настройками. Требования:

- под содержит в себе 3 контейнера — фронтенд, бекенд, базу;


 Собираю контейнеры в докер репозиторий из папки с примером
каждый компонент (база, бекенд, фронтенд) запускаются в своем поде, регулируются отдельными deployment’ами;
для связи используются service (у каждого компонента свой);
в окружении фронта прописан адрес сервиса бекенда;
в окружении бекенда прописан адрес сервиса базы данных.
        Собираю контейнеры в докер репозиторий из папки с примером
Backend
>        docker build -t backendtest .
>        docker login
>        docker tag backendtest:latest alexspedan/netologybackend:latest
>        docker push alexspedan/netologybackend:latest
Frontend
>        docker build -t frontendtest .
>        docker login
>        docker tag frontendtest:latest alexspedan/netologyfrontend:latest
>        docker push alexspedan/netologyfrontend:latest
>        Создаю deployment для контейнеров
>        alexsp@master1:~$ kubectl create -f https://raw.githubusercontent.com/alexspedan/kubernetes_postgres_statefulset/master/app2.yml -n staging
deployment.apps/netology-lab13 created
>        kalexsp@master1:~$ kubectl create -f https://raw.githubusercontent.com/alexspedan/kubernetes_postgres_statefulset/master/pg.yml -n staging
statefulset.apps/pg created
```
alexsp@master1:~$ kubectl get pod -n staging
NAME                             READY   STATUS    RESTARTS   AGE
netology-lab13-7dfb9b874-9t9ps   2/2     Running   0          6m45s
netology-lab13-7dfb9b874-dx7md   2/2     Running   0          6m45s
pg-0                             1/1     Running   0          32s
```

## Задание 2: подготовить конфиг для production окружения
Следующим шагом будет запуск приложения в production окружении. Требования сложнее:

каждый компонент (база, бекенд, фронтенд) запускаются в своем поде, регулируются отдельными deployment’ами;
для связи используются service (у каждого компонента свой);
в окружении фронта прописан адрес сервиса бекенда;
в окружении бекенда прописан адрес сервиса базы данных.
- Добавляю с помощью deployment фронтенд и бекенд;
>        Создаю deployment для контейнеров
>        kubectl apply -f https://raw.githubusercontent.com/alexspedan/devops-netology/main/13.1.Kubernetes/backend_deployment.yaml
>        kubectl apply -f https://raw.githubusercontent.com/alexspedan/devops-netology/main/13.1.Kubernetes/frontend_deployment.yaml
или kubectl create deployment backendtest --image=alexspedan/backendtest:latest
или kubectl create deployment frontendtest --image=alexspedan/frontendtest:latest
- база данных — через statefulset.
> Добавляю бд statefulset  
>        kubectl apply -f https://raw.githubusercontent.com/netology-code/devkub-homeworks/main/13-kubernetes-config/docker-compose.yml
> 
> применяю storageclass.yml
> 
>       kubectl apply -f https://raw.githubusercontent.com/alexspedan/kubernetes_postgres_statefulset/master/storageclass.yml
применяю storage.yml PVC

>       kubectl apply -f https://raw.githubusercontent.com/alexspedan/kubernetes_postgres_statefulset/master/storage.yml
> применяю configmap
> 
>       kubectl apply -f https://raw.githubusercontent.com/alexspedan/kubernetes_postgres_statefulset/master/configmap.yml
> применяю statefulset
>       kubectl apply -f https://raw.githubusercontent.com/alexspedan/kubernetes_postgres_statefulset/master/statefulset.yml
> применяю сервис
>       kubectl apply -f https://raw.githubusercontent.com/alexspedan/kubernetes_postgres_statefulset/master/service.yml
![](https://github.com/alexspedan/devops-netology/raw/main/13.1.Kubernetes/pic2.png)
![](https://github.com/alexspedan/devops-netology/raw/main/13.1.Kubernetes/pic3.png)
=======
или kubectl create deployment backendtest --image=alexspedan/backendtest:latest
или kubectl create deployment frontendtest --image=alexspedan/frontendtest:latest
- база данных — через statefulset.
>        Добавляю бд statefulset
>        
kubectl apply -f https://raw.githubusercontent.com/netology-code/devkub-homeworks/main/13-kubernetes-config/docker-compose.yml
применяю storageclass.yml
kubectl apply -f https://raw.githubusercontent.com/alexspedan/kubernetes_postgres_statefulset/master/storageclass.yml
применяю storage.yml PVC
kubectl apply -f https://raw.githubusercontent.com/alexspedan/kubernetes_postgres_statefulset/master/storage.yml
применяю configmap
kubectl apply -f https://raw.githubusercontent.com/alexspedan/kubernetes_postgres_statefulset/master/configmap.yml
применяю statefulset
kubectl apply -f https://raw.githubusercontent.com/alexspedan/kubernetes_postgres_statefulset/master/statefulset.yml
применяю сервис
kubectl apply -f https://raw.githubusercontent.com/alexspedan/kubernetes_postgres_statefulset/master/service.yml


